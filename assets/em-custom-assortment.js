/**
 * 
 * WARNING:
 * This file was automatically generated as the output of a build process.
 * If you make changes to it directly via Shopify's Code Editor, your changes
 * will be overwritten the next time a build runs.
 * 
 * If you need to make changes to the source file, request Github Access
 * from the project lead, and follow the process steps in the README file.
 * 
 */

import"./em-chunk-arrive-f2b42605.js";function t({flavors:t,categories:e,liqueurCategory:i,flavorsPerBoxSize:s}){const n=Object.fromEntries(s.trim().split("\n").map((t=>{if(!t.includes("="))return;const[e,i]=t.split(/\s*=\s*/);return[e,parseInt(i,10)]})).filter((t=>void 0!==t))),o=Object.keys(t).map((t=>parseInt(t,10)));return{filterBy:e[0],currentBoxSize:"",selectionIds:[],alcoholRestrictionsAccepted:this.$persist(!1).as("custom_assortment_alcohol_restrictions_accepted").using(sessionStorage),get selection(){return void 0===this.selectionIds.filter?[]:this.selectionIds.filter((t=>o.includes(t))).map((e=>t[e]))},get count(){return this.selectionIds.length},get limit(){return n[this.currentBoxSize]||4},get limitReached(){return this.selectionIds.length>=this.limit},get liqueurView(){return this.filterBy===i},init(){Alpine.effect((()=>{this.currentBoxSize=this.variant.option1})),Alpine.effect((()=>{this.customAssortmentReady=this.count>0})),Alpine.effect((()=>{this.count>this.limit&&this.selectionIds.splice(this.limit-this.count,this.count-this.limit)})),Alpine.effect((()=>{this.selectionIds=this.selectionIds.filter((t=>o.includes(t)))}));const t=this;document.arrive("og-offer",{onceOnly:!0,existing:!0},(function(){Alpine.effect((()=>{this.setAttribute("product-components",JSON.stringify(t.selection.map((t=>`${t.id}`))))}))})),Alpine.effect((()=>{console.log(JSON.stringify(this.selection.map((t=>`${t.id}`))))}))},add(t){if(this.limitReached)return;const e=this.selectionIds.lastIndexOf(t);this.selectionIds.splice(e>=0?e:this.count,0,t)},remove(t){const e=this.selectionIds.indexOf(t);e>=0&&this.removeByIndex(e)},removeByIndex(t){this.selectionIds.splice(t,1)},clear(){this.selectionIds.splice(0)},directives:{self:{"@add"(t){this.add(t.detail)},"@remove"(t){this.remove(t.detail)},"@more-info"(){this.filterBy=i,window.scrollTo({top:this.$refs.filters.getBoundingClientRect().top+window.scrollY-(document.querySelector("sticky-header")?.getBoundingClientRect().height||130),behavior:"smooth"})},"@add-to-cart.window"(){window.location.pathname="/cart"}},lineItemProperties:{flavors:{":value"(){const t={};return this.selection.map((t=>t.option1)).forEach((e=>{t[e]=(t[e]||0)+1})),Object.entries(t).map((([t,e])=>`${t} (Ã—${e})`)).join(",\n")}},skus:{":value"(){return this.selection.map((t=>t.sku)).join(",")}}},alcoholRestrictions:{"x-show"(){return!1===this.alcoholRestrictionsAccepted&&this.filterBy===i}}}}}function e({id:t,categories:e,inStock:i,hasLiqueur:s}){return{count:0,visible:!0,get selected(){return this.count>0},init(){Alpine.effect((()=>{this.count=this.selectionIds.filter((e=>e===t)).length}))},directives:{self:{"x-show"(){return e.includes(this.filterBy)}},moreInfo:{"@click"(){this.$dispatch("more-info")},"x-show"(){return!this.alcoholRestrictionsAccepted},":disabled"(){return this.liqueurView}},add:{"x-show"(){return(!0!==s||!1!==this.alcoholRestrictionsAccepted)&&!this.selected},":disabled"(){return!1===i||this.limitReached},"@click"(){this.$dispatch("add",t)}},plus:{"x-show"(){return this.selected},":disabled"(){return this.limitReached},"@click"(){this.$dispatch("add",t)}},minus:{"x-show"(){return this.selected},"@click"(){this.$dispatch("remove",t)}},count:{"x-show"(){return this.selected},"x-text"(){return this.count}}}}}function i(t){return{index:t,selected:!1,id:"",name:"",thumbnail:"",init(){Alpine.effect((()=>{this.selected=void 0!==this.selection[t],this.id=this.selection[t]?.id||"",this.name=this.selection[t]?.option1||"",this.thumbnail=this.selection[t]?.thumbnail||""}))}}}document.addEventListener("alpine:init",(()=>{Alpine.data("customAssortment",t),Alpine.data("selection",i),Alpine.data("flavor",e)}));
